%include "io64.inc"
%include "io64_float.inc"
section .bss
x: resq 1
y: resq 1
a: resq 1
t: resq 1
s: resq 1
section .text
global CMAIN
CMAIN:
    mov rbp, rsp; for correct debugging
    finit
    fld1
    mov rax, __float64__(2.0)
    mov qword[s], rax
    FLD qword[s]
    READ_DOUBLE [a]
    READ_DOUBLE [x]
    FLD qword[a]
    FLD qword[x]
    fdiv
    FLD qword[s]
    fmul
    
    fld1
    fldl2e
    fmul
    fld     st0
    frndint
    fsub st1, st0
    fxch st1
    f2xm1
    fld1
    fadd
    fscale
    fstp st1

    FYL2X ;вычисляем показатель
    FLD1 ;загружаем +1.0 в стек
    FLD ST1 ;дублируем показатель в стек
    FPREM ;получаем дробную часть
    F2XM1 ;возводим в дробную часть показателя
    FADD ;прибавляем 1 из стека
    FSCALE ;возводим в целую часть и умножаем
    FSTP ST1 ; выталкиваем лишнее из вершины
    
    FLD1
    fadd
    
    fdiv
    
    fsub
    
    ;fst qword[t]
    ;PRINT_DOUBLE t
 

    READ_DOUBLE [y]
    FLD qword[y]

    
    fcomip
    jne false
    PRINT_STRING "Yes!"
    xor rax, rax
    ret
    false:
    PRINT_STRING "No"
    xor rax, rax
    ret
